import { Meta, Canvas } from '@storybook/addon-docs'
import { A11yReport } from '@docs/helpers/A11yReport'
import { ArgTypes as ExtendedArgTypes } from '@docs/helpers/ArgTypes'

import { Textarea, TextareaGroup } from '.'

import * as stories from './Textarea.stories'

<Meta of={stories} />

# Textarea

The textarea component allows you to easily create multi-line text inputs.

## Install

```sh
npm install @spark-ui/textarea
```

## Import

```tsx
import { Textarea, TextareaGroup } from '@spark-ui/textarea'
```

## Props

<ExtendedArgTypes
  of={Textarea}
  description="The textarea component allows you to easily create multi-line text inputs."
  subcomponents={{
    TextareaGroup: {
      of: TextareaGroup,
      description:
        'Use this wrapper whenever you need a more complex textarea. For example if you need to have leading/trailing icons.',
    },
    'TextareaGroup.LeadingIcon': {
      of: TextareaGroup.LeadingIcon,
      description: 'Prepend a decorative icon inside the textarea (to the left).',
    },
    'TextareaGroup.TrailingIcon': {
      of: TextareaGroup.TrailingIcon,
      description:
        'Append a decorative icon inside the textarea (to the right). This element will be replaced by a status indicator whenever the textarea is in error/alert/success state.',
    },
  }}
/>

## Usage

<Canvas of={stories.Default} />

### Uncontrolled

Use `defaultValue` prop to set the default value of the textarea. Optionally `onChange` prop can be used to know when the value of the textarea changes.

<Canvas of={stories.Uncontrolled} />

### Controlled

Use `value` and `onChange` props to control the value of the textarea.

<Canvas of={stories.Controlled} />

### Disabled

To indicate that a textarea is disabled, use the `disabled` prop. If you're wrapping your `Textarea` with a `TextareaGroup`, set the prop on the group instead.

<Canvas of={stories.Disabled} />

### Icons

A `TextareaGroup` can have a `LeadingIcon` and/or `TrailingIcon`. Please note that the `TrailingIcon` will be automatically replaced by the state indicator if the input has one (`error`, `alert` or `success`).

<Canvas of={stories.Icon} />

### Resizable

By default, the textarea component is resizable. However, you can set the `isResizable` prop to `false` to disable this feature and prevent resizing.

<Canvas of={stories.Resizable} />

### Customized scrollbar

To improve the appearance of the scrollbar, one can use the `scrollbar-color` CSS property.

<Canvas of={stories.CustomizedScrollbar} />

### State

Use `state` prop to assign a specific state to the group, choosing from: `error`, `alert` and `success`. By doing so, the outline styles will be updated.

<Canvas of={stories.State} />

## Form field

When using the `Textarea` component you might want to use it in combination with `FormField` to add a proper label, error message, etc.

### Characters count

Use the `FormField.CharactersCount` component to display the actual text count and the max length allowed.

<Canvas of={stories.FieldCharactersCount} />

### Helper message

Use the `FormField.HelperMessage` component to provide a description to the textarea.

<Canvas of={stories.FieldHelperMessage} />

#### Hidden label

In certain cases, a visible label may not be necessary. To achieve this behavior, use the `VisuallyHidden` component.

<Canvas of={stories.FieldHiddenLabel} />

### Label

Use `FormField.Label` to add a label to the textarea.

<Canvas of={stories.FieldLabel} />

### Required

Use the `isRequired` prop of the `FormField` to indicate that the textarea is required.

<Canvas of={stories.FieldRequired} />

### Validation

set the `state` prop of the `FormField` to `error` to indicate that the input is invalid. Optionally use the `FormField.ErrorMessage` to describe why the input is invalid.

<Canvas of={stories.FieldInvalid} />

## Accessibility

<A11yReport of="textarea" />
