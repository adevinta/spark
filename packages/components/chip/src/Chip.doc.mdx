import { Meta, Canvas } from '@storybook/addon-docs'
import { ArgTypes as ExtendedArgTypes } from '@docs/helpers/ArgTypes'
import { A11yReport } from '@docs/helpers/A11yReport'
import { Chip } from '.'
import { Callout } from '@docs/helpers/Callout'
import { Kbd } from '@spark-ui/kbd'

import * as stories from './Chip.stories'

<Meta of={stories} />

# Chip

Help people enter information, make selections, filter content, or trigger actions.

#### Chips aren’t buttons

<Callout kind="warning">
  Chips and buttons are similar in that they both provide visual cues to prompt users to take
  actions and make selections. However, there are important distinctions to be aware of.
</Callout>
<br />
<Callout kind="warning">
  Multiple chips should appear together in a group, whereas there should be no more than 3 buttons
  in a single arrangement.
</Callout>

Chips are reactive and contextual, whereas buttons are static and predetermined.
A chip should offer a different action depending on the nature of the content it supports,
whereas a button should be a persistent fixture of a layout.
From a user-flow perspective,
Chips represent forking paths in an experience while a button represents a linear step along a flow.

#### Chips aren't input fields

<Callout kind="warning">
  Interactive Chips represent Call to Action elements and should never be placed inside forms rolled
  as checkboxes or radio buttons
</Callout>

The only way a chip manages interactivity is for firing contextual actions,
whereas checkboxes and radio form field store state values for being submitted.

Chips handle 4 different features:

- **Display** data
- Fire **Actions** (button role)
- Handle **Selections** (button role selected)
- Manage **Deletions** (clear button)

Combining those features chips give 4 different usages:

- [Assist](#assist)
- [Filter](#filter)
- [Input](#input)
- [Suggestion](#suggestion)

## Install

```sh
npm install @spark-ui/chip
```

## Import

```tsx
import { Chip } from '@spark-ui/chip'
```

## Props

<ExtendedArgTypes
  of={Chip}
  description="Component for offering information"
  subcomponents={{
    'Chip.Content': {
      of: Chip.Content,
      description: 'The main chip container',
    },
    'Chip.LeadingIcon': {
      of: Chip.LeadingIcon,
      description: 'Prepend a decorative icon inside the chip (to the left).',
    },
    'Chip.TrailingIcon': {
      of: Chip.TrailingIcon,
      description: 'Append a decorative icon inside the chip (to the right).',
    },
    'Chip.ClearButton': {
      of: Chip.ClearButton,
      description: 'For removing the chip.',
    },
  }}
/>

## Usage

### Default

<Canvas of={stories.Default} />

### Kind

<Canvas of={stories.Kind} />

### Intent

All intents are available

<Canvas of={stories.DefaultIntent} />

When the chip has an associated action, specific hover and focus styles will be applied.

<Canvas of={stories.ActionIntent} />

When the chip has a `pressed` status configured it becomes a toggle button.

<Canvas of={stories.SelectionIntent} />

### Disabled

When a chip is `disabled`, no action is fired when clicking on it.

<Canvas of={stories.Disabled} />

## Advanced usage

### Assist

Assist chips represent smart or automated actions that can span multiple apps,
such as opening a calendar event from the home screen.

Assist chips function as though the user asked an assistant to complete the action.
They should appear dynamically and contextually in a UI.

An alternative to assist chips is buttons, which should appear persistently and consistently.

<Canvas of={stories.AssistEvent} />

### Filter

Filter chips represent filters for a collection.
They use tags or descriptive words to filter content.
They can be a good alternative to toggle buttons or checkboxes.

Tapping on a filter chip activates it and appends a leading checkmark icon to the starting edge of the chip label.

#### Single selection

<Canvas of={stories.SingleSelectionFilter} />

When there is no element selected (no filter applied) all the results are shown.

#### Multiple Selection

Multi Selection Filters can represent unions or intersections between multiple categories.

##### Union

The results shown on a union filter are all the elements that satisfy at least 1 of the selected filters.

<Canvas of={stories.UnionFilter} />

- When there is no element selected (no filter applied) all the results are shown.
- When all the elements are selected all the results are shown.

##### Intersection

The results shown on a union filter are all the elements that satisfy all the selected filters.

<Canvas of={stories.IntersectionFilter} />

- When there is no element selected (no filter applied), all the results are shown.
- When all the elements are selected only shows the results that
  satisfy all the filters (normally none of them).

### Input

Input chips represent discrete pieces of information entered by a user, such as Gmail contacts or filter options within a search field.

They enable user input and verify that input by converting text into chips.

<Canvas of={stories.Input} />

### Suggestion

Suggestion chips help narrow a user’s intent by presenting dynamically generated suggestions, such as possible responses or search filters.

<Canvas of={stories.Suggestion} />

Suggestion chips can offer quick-reply options in a chat or email app, or It can help the user start a search.

## Accessibility

<A11yReport of="chip" />

- Focusable for **Clickable**, **Selectable**.
- Clear button keyboard accessible by default when appearing.

### Keyboard Interactions

#### Clickable

- Chip is **focusable**.

- <Kbd>Space</Kbd>: Activates the Chip.
- <Kbd>Enter</Kbd>: Activates the Chip.

#### Selectable

- <Kbd>Space</Kbd>: Toggle its on/off state.
- <Kbd>Enter</Kbd>: Toggle its on/off state.

#### Cleanable

When the Chip is focused

- <Kbd>Del</Kbd>: Removes the Chip and focus the next focusable element.
- <Kbd>Backspace</Kbd>: Removes the Chip and focus the previous focusable element.

When the ClearButton is focused

- <Kbd>Space</Kbd>: fires the onClear handler.
- <Kbd>Enter</Kbd>: fires the onClear handler.
