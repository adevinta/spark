import { Meta, Canvas } from '@storybook/blocks'
import { ArgTypes as ExtendedArgTypes } from '@docs/helpers/ArgTypes'
import * as SlotStories from './Slot.stories'
import { Slot, Slottable } from '.'

<Meta of={SlotStories} />

# Slot

Merges its props onto its immediate child.

`Slot` props are merged with the child ones.

<Canvas of={SlotStories.Default} />

## Install

```
npm install @spark-ui/components
```

## Anatomy

```tsx
import { Slot, Slottable } from "@spark-ui/components/slot"

export default () => (
  <Slot>
    <Slottable />
  </Slot>
);
```

## Prop Merge Techniques

Depending on each type of prop, `Slot` applies different techniques for its combination

- default (common props)
- handlers
- classNames
- style
- refs

### Default

The Slot-n-Child defined default props merging technique is the `join` props method.
In case of collision, it will preserve the most declarative (child value)

<Canvas of={SlotStories.SlotNChild} />

### Handlers

The Slot-n-Child defined handlers props merging technique is firing all 2 handlers in 1.

```js
const resultingHandler =
  ([...handlers] = []) =>
  (...handlerArgs) =>
    handlers.forEach(handler => typeof handler === 'function' && handler(...args))
```

<Canvas of={SlotStories.Handlers} />

### ClassNames

The Slot-n-Child defined `classNames` props merging technique is the string **concat** `${slotClassNames} ${childrenClassName}`

<Canvas of={SlotStories.ClassNames} />

### Style

The Slot-n-Child defined `style` prop merging object technique is the `join` props method.
In case of collision, it will preserve the most declarative (child value)

<Canvas of={SlotStories.Style} />

### Ref

The Slot-n-Child defined `style` prop merging object technique is the `join` props method.
In case of collision, it will preserve the most declarative (child value)

<Canvas of={SlotStories.Ref} />

### Append

A `Slot` can have multiple descendant elements as children, but only one of them can be a `Slottable`.
All non Slottable direct Slot children descendant elements will be appended to the Slottable unique children Element.

<Canvas of={SlotStories.Append} />

## API Reference

<ExtendedArgTypes
  of={Slot}
  description="Merges its props onto its immediate child."
  subcomponents={{
    Slottable: {
      of: Slottable,
      description:
        'Wraps the elements on a fragment appending all other slot descendant elements not wrapped into it.',
    },
  }}
/>
