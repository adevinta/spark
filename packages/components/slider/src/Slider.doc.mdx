import { Meta, Canvas } from '@storybook/blocks'
import { A11yReport } from '@docs/helpers/A11yReport'
import { ArgTypes } from '@docs/helpers/ArgTypes'
import { Kbd } from '@spark-ui/kbd'

import { Slider } from '.'

import * as stories from './Slider.stories'

<Meta of={stories} />

# Slider

An input where the user selects a value from within a given range.

## Install

```sh
npm install @spark-ui/slider
```

## Import

```tsx
import { Slider } from '@spark-ui/slider'
```

## Props

<ArgTypes
  of={Slider}
  description="Contains all the slider component parts. It will render an input for each thumb when used within a form to ensure events propagate correctly."
  subcomponents={{
    'Slider.Thumb': {
      of: Slider.Thumb,
      description: 'A draggable thumb. You can render multiple thumbs.',
    },
    'Slider.Track': {
      of: Slider.Track,
      description: 'The track shows the range available for user selection.',
    },
  }}
/>

## Usage

### Default

<Canvas of={stories.Default} />

### Range

Add multiple thumbs and values to create a range slider.

<Canvas of={stories.Range} />

### Intent

Use `intent` prop to set the color of track and thumb.

<Canvas of={stories.Intent} />

### Shape

Use `shape` prop to set the shape of track and range.

<Canvas of={stories.Shape} />

### Disabled

Use `disabled` prop to indicate that slider is disabled.

<Canvas of={stories.Disabled} />

## Advanced usage

### Restricted values

If you find yourself in a situation where you have a fixed set of values for your range, you can achieve this using the `max` property.
The `max` property should be set to the number of steps you have within your set of values minus one.

Additionally, you will need to remap the value from the **Slider** component to the values comprised in your set of values.

For example, let's say your set of values is `[10, 25, 50, 100]`. In this case, you would set the `max` property to 3 and remap the values from the **Slider**.

The **Slider** component, by default, outputs values from `min` to `max` (3 in our case). Therefore, it's your responsibility to map these values to the corresponding values in your set.

To ensure **proper accessibility**, make sure to set the `aria-valuetext` attribute to the remapped value. This will ensure that the correct value is announced to users who rely on assistive technologies.

Here's an example to illustrate this:

<Canvas of={stories.RestrictedValues} />

## Accessibility

<A11yReport of="slider" />

Adheres to the [Slider WAI-ARIA design pattern](https://www.w3.org/WAI/ARIA/apg/patterns/slider-multithumb/).

Implementations should define an `aria-label` attribute on each `Slider.Thumb` to preserve accessibility.

### Keyboard Interactions

- <Kbd>ArrowRight</Kbd>: Increments by the `step` value.
- <Kbd>ArrowLeft</Kbd>: Decrements by the `step` value.
- <Kbd>ArrowUp</Kbd>: Increases the value by the `step` amount.
- <Kbd>ArrowDown</Kbd>: Decreases the value by the `step` amount.
- <Kbd>PageUp</Kbd>: Increases the value by a larger `step`.
- <Kbd>PageDown</Kbd>: Decreases the value by a larger `step`.
- <Kbd>Shift + ArrowUp</Kbd>: Increases the value by a larger `step`.
- <Kbd>Shift + ArrowDown</Kbd>: Decreases the value by a larger `step`.
- <Kbd>Home</Kbd>: Sets the value to its minimum.
- <Kbd>End</Kbd>: Sets the value to its maximum.
