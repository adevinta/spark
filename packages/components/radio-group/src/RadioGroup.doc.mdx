import { Canvas, Meta } from '@storybook/blocks'
import { A11yReport } from '@docs/helpers/A11yReport'
import { ArgTypes } from '@docs/helpers/ArgTypes'
import { RadioGroup } from '.'
import * as stories from './RadioGroup.stories'
import { Kbd } from '@spark-ui/kbd'

<Meta of={stories} />

# RadioGroup

Component used when only one choice may be selected in a series of options.

Radio label can be multiline. Still you should care of not using elements (for the label) with greater line height than the radio input height, to preserve vertical alignment.

<Canvas of={stories.Default} />

## Install

```sh
npm install @spark-ui/radio-group
```

## Anatomy

```ts
import { RadioGroup } from '@spark-ui/radio-group'

export default () => (
  <RadioGroup>
    <RadioGroup.Radio />
  </RadioGroup>
);
```

## Examples

### Uncontrolled

Use `defaultValue` prop to make the radio group uncontrolled.

<Canvas of={stories.Uncontrolled} />

### Controlled

Use `value` and `onValueChange` props to make the radio group controlled.

<Canvas of={stories.Controlled} />

### Disabled

<Canvas of={stories.Disabled} />

### Disabled specific radio Item

<Canvas of={stories.DisabledItem} />

### Reverse

Use the `reverse` prop if you want the label to be placed on the left side of the Radio

<Canvas of={stories.Reverse} />

### Intent

Use `intent` prop to set the color of every radio inside the group. Optionally, you can set the `intent` in each radio component.

<Canvas of={stories.Intent} />

### Orientation

Use `orientation` prop to set the orientation of the checkbox group which could be `vertical` or `horizontal`.

<Canvas of={stories.Orientation} />

## Advanced Examples

### Custom implementation

Below is an implementation of a custom radio group that might provide guidance if you need to implement something custom as well.

When implementing a custom radio group, it is important to be careful to properly handle **accessibility (a11y) requirements**, as a11y considerations will not be handled behind the scenes as they would be when using a regular radio group implementation

<Canvas of={stories.CustomImplementation} />

### Invisible radio group

We can go even further by completely hiding the radios using our [`VisuallyHidden`](?path=/docs/components-visuallyhidden--docs#visuallyhidden) component. This way, you end up with a component that shares all the intrinsic behaviors of a radio group, but does not look like one.

When implementing a custom radio group, it is important to be careful to properly handle **accessibility (a11y) requirements**, as a11y considerations will not be handled behind the scenes as they would be when using a regular radio group implementation

<Canvas of={stories.InvisibleRadioGroup} />

## Form field

When using the `RadioGroup` component you might want to use it in combination with `FormField` to add a proper label, error message, etc.

### Label

Use `FormField.Label` to add a label to the input.

<Canvas of={stories.FieldLabel} />

#### Hidden label

In certain cases, a visible label may not be necessary, such as when using an input as a searcher. To achieve this behavior, use the `VisuallyHidden` component.

<Canvas of={stories.FieldHiddenLabel} />

### Required

Use the `isRequired` prop of the `FormField` to indicate that the input is required.

<Canvas of={stories.FieldRequired} />

### Helper message

Use the `FormField.HelperMessage` component to provide a description to the input.

<Canvas of={stories.FieldHelperMessage} />

### Validation

set the `state` prop of the `FormField` to `error` to indicate that the input is invalid. Optionally use the `FormField.ErrorMessage` to describe why the input is invalid.

<Canvas of={stories.FieldInvalid} />

## API Reference

<ArgTypes
  of={RadioGroup}
  description="Contains all the parts of a radio group."
  subcomponents={{
    'RadioGroup.Radio': {
      of: RadioGroup.Radio,
      description: 'An item in the group that can be checked.',
    },
  }}
/>


## Accessibility

<A11yReport of="radio-group" />

This component should always have a label, directly declared through the `children` prop or inherited from the `FormField` wrapper. If none of those are available it is strongly recommended to define an `aria-label` attribute, to comply to accessibility requirements.

Adheres to the [Radio Group WAI-ARIA design pattern](https://www.w3.org/WAI/ARIA/apg/patterns/radiobutton) and uses [roving tabindex](https://www.w3.org/TR/wai-aria-practices-1.2/examples/radio/radio.html) to manage focus movement among radio items.

### Keyboard Interactions

- <Kbd>Tab</Kbd>: Moves focus to either the checked radio item or the first radio item in the group.
- <Kbd>Shift</Kbd> + <Kbd>Tab</Kbd>: Moves focus forward to either the checked radio item or the
  first radio item in the group.
- <Kbd>Space</Kbd>: When focus is on an unchecked radio item, checks it.
- <Kbd>ArrowDown</Kbd>: Moves focus and checks the next radio item in the group.
- <Kbd>ArrowRight</Kbd>: Moves focus and checks the next radio item in the group.
- <Kbd>ArrowUp</Kbd>: Moves focus to the previous radio item in the group.
- <Kbd>ArrowLeft</Kbd>: Moves focus to the previous radio item in the group.
